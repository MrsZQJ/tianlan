<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>新闻</title>
    <link rel="stylesheet" href="./assets/vendors/bootstrap/css/bootstrap.css" />
    <link rel="stylesheet" href="./assets/css/base.css">
    <link rel="stylesheet" href="./assets/css/news.css">
    <link rel="stylesheet" href="./assets/vendors/font-awesome-4.7.0/css/font-awesome.css" />
    <script src="./assets/vendors/rem.js"></script>
</head>

<body>
    <div id="basement">
        <header>

        </header>
        <!-- 下拉菜单 -->
        <nav id="navbar-example" class="navbar navbar-default navbar-static">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button class="navbar-toggle collapsed" type="button" data-toggle="collapse"
                        data-target=".bs-example-js-navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="./index.html"><i class="fa fa-home"></i></a>
                    <div class="sousuo2 visible-xs">
                        <div class="input-group input-group-md">
                            <input type="text" class="form-control sousuo-ipt" placeholder="Search" />
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="button">Go!</button>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="collapse navbar-collapse bs-example-js-navbar-collapse">
                    <ul class="nav navbar-nav dropdown-fat">
                        <!-- <li class="dropdown">
                                    <a href="./ConnectingRods.html">
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;连杆&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        
                                    </a>
                                </li> -->
                    </ul>
                </div>
                <!-- /.nav-collapse -->
            </div>
            <!-- /.container-fluid -->
        </nav>
        <!-- 搜索框 -->
        <div class=" sousuo hidden-xs">
            <div class="input-group input-group-md col-xs-5 col-md-3">
                <input type="text" class="form-control sousuo-ipt" placeholder="Search" />
                <span class="input-group-btn">
                    <button class="btn btn-default" type="button">Go!</button>
                </span>
            </div>
        </div>
        <!-- 面包屑 -->
        <ul class="breadcrumb">
            <li><a href="./index.html">首页-----产品展示</a></li>
            <li class="active">新闻</li>
        </ul>
        <!-- 分类信息页面 -->
        <div class="conter">
            <div class="row">
                <div class="col-lg-3 col-md-3 hidden-xs hidden-sm">
                    <div class="conter-left">
                        <div class="list-group list-group-new">
                            <a href="javascript:" class="list-group-item active" style="border: 0">
                                最新产品
                            </a>
                            <a href="javascript:" class="list-group-item" style="border: 0;padding: 0;">
                                <div class="thumbnail">
                                    <img src="../uploads/mao.jpg" alt="通用的占位符缩略图">
                                    <div class="caption">
                                        <p><a href="#">Forged pistons for the Vauxhall Opel C20XE 2.0ltr 16v engine,
                                                86.5mm
                                                Pistons</a>
                                        </p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-md-9 col-xs-12 you">
                    <div class="conter-right ">
                        <div class="list-group">
                            <a href="javascript:" class="list-group-item active" style="border: 0">
                                新闻
                            </a>
                            <div class="conter-right-con">
                                <!-- 分类 -->
                                <ul class="news">
                                    <li><a href="#"></a><span></span></li>
                                </ul>
                                <ul class="pagination pagination-sm pull-right">
                                    <li><a href="#">上一页</a></li>
                                    <li><a href="#">1</a></li>
                                    <li><a href="#">2</a></li>
                                    <li><a href="#">3</a></li>
                                    <li><a href="#">下一页</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



        </div>
    </div>
    <!-- footer -->
    <footer>
        <div class="row hidden-xs hidden-sm hidden-md">
            <div class="col-md-4">
                <h4>关于我们</h4>
                <ul>
                    <li><a href="#">公司简介</a></li>
                    <li><a href="#">质量反馈</a></li>
                    <li><a href="#">企业文化</a></li>
                </ul>
            </div>
            <div class="col-md-4">
                <h4>联系我们</h4>
                <ul>
                    <li><a href="#">客户服务</a></li>
                    <li><a href="#">合作洽谈</a></li>
                </ul>
            </div>
            <div class="col-md-4">
                <h4>公司地址</h4>
                <ul>
                    <li><a href="#">地址：广东省深圳市南山区沙河西路2009号尚美科技大厦1601-1602</a></li>
                    <li><a href="#">电话：0755-23216034</a></li>
                    <li><a href="#">邮箱：contact@86cp.com</a></li>
                </ul>
            </div>
        </div>
        <div class="visible-xs visible-sm visible-md footer-small">
            <p>Copyright © 深圳市天蓝网络科技有限公司 All Rights Reserved. 版权所有 粤ICP备18142694号-1</p>
        </div>
    </footer>
    <script src="./assets/vendors/jquery/jquery.js"></script>
    <script src="./assets/vendors/bootstrap/js/bootstrap.js"></script>
    <script src="./assets/vendors/page/jquery.twbsPagination.min.js"></script>
    <script src="./assets/vendors/template-web.js"></script>
</body>
<script type="text/html" id="nav">
    {{each list value index}}
    <li class="{{if value.name=='新闻'}} active  {{else}} dropdown {{/if}} ">
        <a href="{{value.link}}">
            {{value.name}}
        </a>
    </li>
    {{/each}}
</script>
<script type="text/html" id="news">
    {{each list value}}
    <li><a href="newsDetails.html?id={{value.Id}}"><i
                class="fa fa-caret-right"></i>{{value.title}}</a><span>{{value.create_time}}</span></li>
    {{/each}}
</script>
<script type="text/html" id="list-group-new">
    <a href="javascript:" class="list-group-item active" style="border: 0">
        最新产品
    </a>
    {{each list value}}
    <a href="javascript:" class="list-group-item" style="border: 0;padding: 0;">
        <div class="thumbnail">
            <img src="{{value.feature1}}">
            <div class="caption">
                <p><a href="product_rodDetails.html?id={{value.Id}}">{{value.title}}</a>
                </p>
            </div>
        </div>
    </a>
    {{/each}}
</script>
<script>
    window.onload = function () {

        $.get({
            url: 'http://localhost:80/frontApi/nav.php',
            dataType: 'json',
            success: function (obj) {
                // console.log(obj);
                const html = template('nav', {
                    list: obj
                })
                // console.log(html);
                $('.navbar-nav').html(html);
            }
        })
        getNews(1)
        function getNews(pageIndex) {
            $.get({
                url: 'http://localhost:80/frontApi/news.php',
                data: {
                    pageIndex: pageIndex,
                    pageSize: 25
                },
                dataType: 'json',
                success: function (obj) {
                    for (var i = 0; i < obj.data.length; i++) {
                        var tim = obj.data[i].create_time
                        obj.data[i].create_time = tim.split('T')[0]
                    }
                    // console.log(tim.split('T')[0]);
                    // console.log(obj);
                    const html = template('news', {
                        list: obj.data
                    })
                    // console.log(html);
                    $('.news').html(html);
                    //先摧毁分页
                    $('.pagination').twbsPagination('destroy');

                    // 这个插件出于节省效率的目的，只会帮你初始化一次！只有第一次来执行这段代码才有用
                    // 后面执行都不会再帮你重新设置那些选项
                    // 解决办法：我让它每次来都是第一次，那就是先删掉它，再创建它
                    $('.pagination').twbsPagination({
                        // 设置总页数
                        totalPages: obj.totalPages,
                        // 设置可见页数
                        visiblePages: 5,
                        // 设置默认让哪一页为起始页（让哪一页为高亮页，默认值为1）
                        // 所以我们要让startPage改为当前页
                        startPage: pageIndex,
                        // 禁用默认的插件初始化完成自动调用点击事件
                        initiateStartPageClick: false,
                        first: "首页",
                        prev: "上一页",
                        next: "下一页",
                        last: "尾页",
                        // 参数1：事件对象
                        // 参数2：被点击的页码数
                        onPageClick: function (event, page) {
                            // alert(page);
                            getNews(page)
                        }
                    });
                }
            })
        }
        $.get({
            url: 'http://localhost:80/frontApi/index-product.php',
            dataType: 'json',
            success: function (obj) {
                var objNew=[]
                objNew.push(obj.rod[0])
                objNew.push(obj.rod[1])
                objNew.push(obj.rod[2])
                objNew.push(obj.bent[0])
                objNew.push(obj.bent[1])
                objNew.push(obj.bent[2])
                objNew.push(obj.piston[0])
                objNew.push(obj.piston[1])
                objNew.push(obj.piston[2])
                const html = template('list-group-new', {
                    list: objNew
                })
                //   console.log(objNew);
                $('.list-group-new').html(html);
            }
        })
    };
</script>

</html>